!function(e){e.Component=function(e,t,i){this.label=e,this.points=t,this.helpText=i,this.selected=ko.observable(!1)},e.ViewModel=function(){var t=this,i=-15;return this.staticComponents=[{label:"Moderate or Severe cognitive/neurologic disability",points:15,helpText:"Moderate = able to live independently with disabilities which may include hemiplegia, seizures, ataxia, dysphagia, or permanent memory or mental changes"},{label:"Admission from a skilled nursing facility",points:6},{label:"Metastatic or hematologic cancer",points:7,helpText:"Any solid tissue malignancy with evidence of metastasis or any blood-borne malignancy"},{label:"Major trauma",points:10,helpText:"Evidence of multisystem injury or single-system injury associated with shock or altered mental status during the current hospitalization"},{label:"Pneumonia",points:1,helpText:"Documented diagnosis of active pneumonia, in which antibiotic therapy has not yet been started or is still ongoing"},{label:"Septicemia",points:7,helpText:"Documented bloodstream infection in which anti-biotic therapy has not yet been started or is still ongoing"},{label:"Hypotension or hypoperfusion",points:5,helpText:"Any evidence of hypotension within 4 h of the event, defined as any of the following: SBP <90 or MAP <60 mm Hg; vasopressor or inotropic requirement after volume expansion (except for dopamine <= 3 microgram/kg/min); or intra-aortic balloon pump"},{label:"Acute stroke",points:8,helpText:"Documented diagnosis of an intracranial or intra-ventricular hemorrhage or thrombosis during the current admission"},{label:"Respiratory insufficiency",points:4,helpText:"Evidence of acute or chronic respiratory insufficiency within 4 h of the event, defined as any of the following: PaO2/FiO2 ratio <300, PaO2 <60 mm Hg, or SaO2 <90% (without preexisting cyanotic heartdisease); PaCO2, ETCO2, or TcCO2 >50 mm Hg; spontaneous respiratory rate >40/min or <5/min; requirement for noninvasive ventilation (eg, bag-valve mask, mask CPAP or BiPAP, nasal CPAP or BiPAP), or negative pressure ventilation; or requirement for ventilation via invasive airway"},{label:"Hepatic insufficiency",points:6,helpText:"Evidence of hepatic insufficiency within 24 h of the event, defined by total bilirubin >2 mg/dL (to convert to micromoles per liter, multiply by 17.104) and AST > 2 times the upper limit of normal or cirrhosis"},{label:"Renal insufficiency or dialysis",points:4,helpText:"Requiring ongoing dialysis or extracorporeal filtration therapies, or serum creatinine >2 mg/dL (to convert to micromoles per liter, multiply by 88.4) within 24 h of the event"},{label:"Medical noncardiac diagnosis",points:7}],this.anySelected=ko.observable(!1),this.componentPoints=ko.observable(i),this.agePoints=ko.observable(0),this.totalPoints=ko.computed(function(){return t.componentPoints()+t.agePoints()}),this.probability=ko.computed(function(){return t.totalPoints()>=24?"0.9%":t.totalPoints()<=23&&t.totalPoints()>=14?"1.7%":t.totalPoints()<=13&&t.totalPoints()>=-5?"9.4%":t.totalPoints()>=-15&&t.totalPoints()<=-6?"27%":void 0}),this.addComponentPoints=function(e){var i=e.selected()?-1*e.points:e.points;return t.componentPoints(t.componentPoints()+i),e.selected(!e.selected()),t.updateAnySelected(),!0},this.updateAnySelected=function(){var e=_.find(t.components(),function(e){return e.selected()});t.anySelected(e||t.patientAge()?!0:!1)},this.clearAll=function(){_.each(t.components(),function(e){e.selected(!1)}),t.componentPoints(i),t.patientAge(""),t.agePoints(0),t.anySelected(!1)},this.components=ko.observableArray([]),this.patientAge=ko.observable(),this.patientAge.subscribe(function(e){var i=parseInt(e,10);t.agePoints(isNaN(i)?0:e>=70&&75>e?2:e>=75&&80>e?5:e>=80&&85>e?6:e>=85?11:0),t.updateAnySelected()}),_.each(this.staticComponents,function(t){this.components.push(new e.Component(t.label,t.points,t.helpText))},this),this},$(document).on("ready",function(){ko.applyBindings(new e.ViewModel,$("#content")[0]),$("[data-toggle='tooltip']").tooltip({trigger:"hover focus click",delay:{show:300,hide:100}}),$("#components .component").on("mouseover",function(){$(".component").removeClass("active"),$(this).addClass("active")}),$("#patientAge").on("keydown",function(e){return 13===e.keyCode?!1:void 0}),$(".component-help-text").on("click",function(e){return e.preventDefault(),!1})})}(window.gofar=window.gofar||{});