<!DOCTYPE html>
<html lang="en">
	<head>
		<title>GO-FAR Calculator</title>

		<meta charset="utf-8">
    	<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
		<meta name="description" content="GO-FAR calculator to estimate the chance of good outcomes following CPR in the hospital.">

		<!-- Include a calculator favicon. -->
		<link rel="icon" type="image/png" href="images/favicon.png" />

		<!-- Include our Bootstrap style and our app's style. -->
		<link rel="stylesheet" href="css/bootstrap-3.3.4.min.css" />
		<link rel="stylesheet" href="css/main.css" />

		<!-- Include our JS libraries. -->
		<script src="js/lib/jquery-1.11.0.min.js"></script>
		<script src="js/lib/bootstrap-3.3.4.min.js"></script>
		<script src="js/lib/knockout-3.1.0.min.js"></script>
		<script src="js/lib/underscore-1.8.2.min.js"></script>
		<script src="js/lib/underscore.string-3.0.3.min.js"></script>

		<!-- Include our app script. -->
		<script src="js/app/gofar.min.js"></script>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries. -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file://. -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
	</head>

	<body>
		<div id="content" class="container">
			<div class="row">
				<div class="col-md-12">
					<h1>Good Outcome Following Attempted Resuscitation (GO-FAR)</h1>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<p class="bg-info padding">Check each condition present on admission to the hospital to calculate total score and probability of survival.</p>
				</div>
			</div>

			<div class="row">
				<form class="col-md-12 form-inline">
					<div id="patientAgeGroup" class="form-group padding">
						<label for="patientAge" id="patientAgeLabel">Patient Age:</label>
						<input type="number" id="patientAge" class="form-control" data-bind="value: patientAge, valueUpdate: 'keyup'" />
					</div>
				</form>
			</div>

			<form id="components" class="form-horizontal">
				<div class="form-group">
					<!-- ko foreach: { data: components, as: 'component' } -->
					<div class="component col-md-4 col-sm-6 col-xs-12">
						<div class="checkbox">
							<label>
								<input type="checkbox" data-bind="click: $root.addComponentPoints, checked: component.selected" />
								<div class="componentLabel">
									<span data-bind="text: component.label"></span><!-- ko if: component.helpText --><span class="component-help-tooltip glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="bottom" data-bind="attr: { title: component.helpText }"></span><!-- /ko -->
								</div>
							</label>
						</div>
					</div>
					<!-- /ko -->
				</div>
			</form>

			<div class="row">
				<div class="col-md-12">
					<table class="table">
						<tr>
							<td class="smaller col-md-4 col-xs-4">GO-FAR Score:</td>
							<td class="smaller col-md-2 text-center col-xs-2"><b><span data-bind="text: totalPoints"></span></b></td>
						</tr>
						<tr>
							<td class="col-md-4 col-xs-4">Probability of survival to discharge with good neurologic status following CPR for in-hospital arrest:</td>
							<td class="col-md-2 text-center col-xs-2"><b><span data-bind="text: probability"></span></b></td>
						</tr>
						<tr>
							<td></td>
							<td class="text-right">
								<button data-bind="click: clearAll, enable: anySelected()" type="button" class="btn btn-info">Clear All</button>
							</td>
						</tr>
					</table>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<p class="smaller">Content derived from <a href="http://archinte.jamanetwork.com/article.aspx?articleid=1735894" target="_blank">Ebell MA et al, Development and Validation of the Good Outcome Following Attempted Resuscitation (GO-FAR) Score to Predict Neurologically Intact Survival After In-Hospital Cardiopulmonary Resuscitation JAMA Internal Medicine November 11, 2013 Volume 173, Number 20</a></p>
					<p class="smaller">DISCLAIMER: All calculations must be confirmed before use. The author make no claims of the accuracy of the information contained herein; and these suggested doses are not a substitute for clinical judgment. Neither Jonathan Rubins nor any other party involved in the preparation or publication of this site shall be liable for any special, consequential, or exemplary damages resulting in whole or part from any user's use of or reliance upon this material.</p>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12">
					<div class="footer smaller text-center">
						<span>Jonathan Rubins &copy; 2015</span>
						<span class="black-circle hidden-sm hidden-xs"></span>
						<a class="hidden-sm hidden-xs" data-toggle="modal" href="#feedback-modal">Feedback</a>
					</div>
				</div>
			</div>
		</div>

		<!-- A modal for users to submit feedback or issues with the calculator. -->
		<div id="feedback-modal" class="modal fade">
			<div class="modal-dialog">
				<div class="modal-content">
					<!-- This is a hidden iFrame that is used to submit the feedback form data to the Google spreadsheet -->
					<iframe name="feedback-iframe" id="feedback-iframe" class="hidden"></iframe>

					<form id="feedback-form" action="https://docs.google.com/forms/d/1ji9XNn0RiJzuaRAtCObXhVi5_Pe54K2dHafOVytTpJ0/formResponse" method="POST" target="feedback-iframe">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
							<h4 class="modal-title">Feedback</h4>
						</div>
						<div class="modal-body">
							<div id="form-content">
								<p class="bg-info padding">If you have any improvements or suggestions for the GO-FAR calculator or are experiencing any issues, please submit your feedback using the form below. If you supply your name and email, I will be sure to get back to you in a timely manner. Thanks!</p>
								<div class="form-group">
									<label for="feedback-name" class="control-label">Name:</label>
									<input type="text" name="entry.468931824" id="feedback-name" class="form-control">
								</div>
								<div class="form-group">
									<label for="feedback-email" class="control-label">Email:</label>
									<input type="text" name="entry.455716436" id="feedback-email" class="form-control">
								</div>
								<div class="form-group">
									<label for="feedback-text" class="control-label">Feedback:</label>
									<textarea rows="6" name="entry.612948227" id="feedback-text" class="form-control"></textarea>
									<p class="form-invalid-text hidden">Please add some feedback or a description of the error you're seeing before submitting.</p>
								</div>
							</div>

							<p id="form-submitted" class="bg-success padding hidden">Thanks for your feedback! If you have provided contact information, I will get back to you as soon as possible.</p>
						</div>
						<div class="modal-footer">
							<button type="submit" id="feedback-form-submit" class="btn btn-primary">Submit</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</form>
				</div>
			</div>
		</div>

		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

			ga('create', 'UA-60588544-1', 'auto');
			ga('send', 'pageview');
		</script>
	</body>
</html>
